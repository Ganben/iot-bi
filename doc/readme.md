# this project is a demo for IoT Business Intelligence System

## 1. Overview

Remote: C project, base on esp8266 in arduino IDE, upload data to remote tcp server in mqtt protocol

Tcpreceiver: receive remote in mqtt broker, and update live data to web front; Redis;

Timedtask: read redis, write SQL, 

Webserver: django project, host data, maintain device infor, SQL, Redis;

## 2. Data 
Remote:

each remote has a id in hexdecimal string format;
with timer,
status of the pins: if 1111 means four pins with empty;

1: empty, 0: normal, 0->1, trigger a step signal with 500ms window

- msg1: mqtt topic: remote, content: in.id in hex string
- msg2: mqtt topic: remote, content: hb.id.timestamp.status in 0101 alike format, time unit: up time in minute;
- msg3: mqtt topic: dev, content: id.pinid
- msg4: 

the incoming signal from input pin are:

1. high voltage for empty
2. low voltage for loaded
3. high step signal last 500ms for changing





Web: dashboard(total), name: index
the bar diagram is for shop list, generated by backend; no update;

Web: dashboard(shop), name: dashboard
the doughnut diagram is for each device(from remote), generated by backend, has update; has hourly stats, in history line;

Web: device, name: detail/:device id
the stats has daily stats as line diagram, generated by history backend data;
will not update;
the stats of each four pins(doughnuts), by history backend; min daily;
will not update;

DB:
live:
active device -> shop
shop -> today, hourly list;

shop -> m device -> m pins
device: daily sums; 
pins daily; 

# 3. 